<craft>
    <parameter name="id" type="int" default="935536"/>
    <script type="text/craftml">        

		var thing = require('irjs-thingiverse')
		var tag = ''

      function main(params, scope, cb){
         console.log('downloading thing id = %d', params.id)

			var fname = 'node_modules/irjs-thingiverse/files/' +params.id + '.stl'
			
			thing.getFileById(params.id, function(err, fname){
				if(err){
					cb(err)
				} else {
					tag = '<stl src="./' + fname + '"/>'
					var res = cb(null, tag)
					
				}
			})
		if(scope)
			return tag
		}

    </script>
</craft>
